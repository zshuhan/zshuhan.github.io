<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>计算机网络学习笔记（四）之网络层 | (✿◡‿◡)胖涵</title><meta name="description" content="网络层  网络层的功能  异构网络互联   网络的互联：指将两个以上的计算机网络，通过一定的方法， 用一种或多种通信处理设备(即中间设备)相互联接起来，以构成更大的网络系统。中间设备又称为中间系统或中继系统。   根据中继系统所在层次，有以下四种不同的中继系统。 1)物理层中继系统:中继器，集线器(Hub)。 2)数据链路层中继系统:网桥或交换机。 3)网络层中继系统:路由器。 4)网络层以上的"><meta name="keywords" content="计算机网络"><meta name="author" content="舍予"><meta name="copyright" content="舍予"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="计算机网络学习笔记（四）之网络层"><meta name="twitter:description" content="网络层  网络层的功能  异构网络互联   网络的互联：指将两个以上的计算机网络，通过一定的方法， 用一种或多种通信处理设备(即中间设备)相互联接起来，以构成更大的网络系统。中间设备又称为中间系统或中继系统。   根据中继系统所在层次，有以下四种不同的中继系统。 1)物理层中继系统:中继器，集线器(Hub)。 2)数据链路层中继系统:网桥或交换机。 3)网络层中继系统:路由器。 4)网络层以上的"><meta name="twitter:image" content="https://zshuhan.github.io/img/page/5.jpg"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络学习笔记（四）之网络层"><meta property="og:url" content="https://zshuhan.github.io/2020/05/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/"><meta property="og:site_name" content="(✿◡‿◡)胖涵"><meta property="og:description" content="网络层  网络层的功能  异构网络互联   网络的互联：指将两个以上的计算机网络，通过一定的方法， 用一种或多种通信处理设备(即中间设备)相互联接起来，以构成更大的网络系统。中间设备又称为中间系统或中继系统。   根据中继系统所在层次，有以下四种不同的中继系统。 1)物理层中继系统:中继器，集线器(Hub)。 2)数据链路层中继系统:网桥或交换机。 3)网络层中继系统:路由器。 4)网络层以上的"><meta property="og:image" content="https://zshuhan.github.io/img/page/5.jpg"><meta property="article:published_time" content="2020-05-14T07:51:15.070Z"><meta property="article:modified_time" content="2020-05-17T09:30:43.005Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://zshuhan.github.io/2020/05/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/"><link rel="prev" title="和我一起学MyBatis" href="https://zshuhan.github.io/2020/06/14/MyBatis/"><link rel="next" title="计算机网络学习笔记（三）之传输层" href="https://zshuhan.github.io/2020/05/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="(✿◡‿◡)胖涵" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">4</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-folder-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 看剧</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#网络层"><span class="toc-number">1.</span> <span class="toc-text"> 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#网络层的功能"><span class="toc-number">1.1.</span> <span class="toc-text"> 网络层的功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#异构网络互联"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 异构网络互联</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#路由与转发"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 路由与转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#网络层提供的两种服务"><span class="toc-number">1.1.3.</span> <span class="toc-text"> 网络层提供的两种服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#路由算法"><span class="toc-number">1.2.</span> <span class="toc-text"> 路由算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#静态路由和动态路由"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 静态路由和动态路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#距离-向量路由算法"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 距离-向量路由算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#链路状态路由算法"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 链路状态路由算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#层次路由"><span class="toc-number">1.2.4.</span> <span class="toc-text"> 层次路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipv4"><span class="toc-number">1.3.</span> <span class="toc-text"> IPv4</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv4分组"><span class="toc-number">1.3.1.</span> <span class="toc-text"> IPv4分组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv4地址与nat"><span class="toc-number">1.3.2.</span> <span class="toc-text"> IPv4地址与NAT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#子网划分与子网掩码-cidr"><span class="toc-number">1.3.3.</span> <span class="toc-text"> 子网划分与子网掩码、CIDR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arp协议-dhcp协议与icmp协议"><span class="toc-number">1.3.4.</span> <span class="toc-text"> ARP协议、DHCP协议与ICMP协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipv6"><span class="toc-number">1.4.</span> <span class="toc-text"> IPv6</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv6的主要特点"><span class="toc-number">1.4.1.</span> <span class="toc-text"> IPv6的主要特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ipv6地址"><span class="toc-number">1.4.2.</span> <span class="toc-text"> IPv6地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#路由协议"><span class="toc-number">1.5.</span> <span class="toc-text"> 路由协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#自治系统as"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 自治系统AS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#域内路由与域间路由"><span class="toc-number">1.5.2.</span> <span class="toc-text"> 域内路由与域间路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rip路由协议"><span class="toc-number">1.5.3.</span> <span class="toc-text"> RIP路由协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ospf路由协议"><span class="toc-number">1.5.4.</span> <span class="toc-text"> OSPF路由协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bgp路由协议"><span class="toc-number">1.5.5.</span> <span class="toc-text"> BGP路由协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#边界网关协议bgp"><span class="toc-number">1.5.6.</span> <span class="toc-text"> 边界网关协议（BGP）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#习题"><span class="toc-number">1.6.</span> <span class="toc-text"> 习题</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div class="post-bg" id="nav" style="background-image: url(/img/page/5.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">(✿◡‿◡)胖涵</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-folder-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 看剧</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">计算机网络学习笔记（四）之网络层</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-05-14 15:51:15"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-14</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-05-17 17:30:43"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-05-17</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">10.3k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 32 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/05/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/05/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h2 id="网络层"><a class="markdownIt-Anchor" href="#网络层"></a> 网络层</h2>
<h3 id="网络层的功能"><a class="markdownIt-Anchor" href="#网络层的功能"></a> 网络层的功能</h3>
<h4 id="异构网络互联"><a class="markdownIt-Anchor" href="#异构网络互联"></a> 异构网络互联</h4>
<ul>
<li>
<p>网络的互联：指将两个以上的计算机网络，通过一定的方法， 用一种或多种通信处理设备(即中间设备)相互联接起来，以构成更大的网络系统。中间设备又称为中间系统或中继系统。</p>
</li>
<li>
<p>根据中继系统所在层次，有以下四种不同的中继系统。<br>
1)物理层中继系统:中继器，集线器(Hub)。<br>
2)数据链路层中继系统:网桥或交换机。<br>
3)网络层中继系统:路由器。<br>
4)网络层以上的中继系统:网关。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">使用物理层或数据链路层的中继系统时，仅仅是把一一个网络扩大了，而从网络层的角度看，它仍然是同一-个网络，一般并不称之为网络互联。因此网络互联通常是指用路由器进行网络互联和路由选择。路由器就是一台专用计算机，用于在互联网中进行路由选择。</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="路由与转发"><a class="markdownIt-Anchor" href="#路由与转发"></a> 路由与转发</h4>
<p>路由器主要完成两个功能:一个是路由选择(确定哪-条路径)， 另一个是分组转发(当一个分组到达时所采取的动作)。路由选择是根据特定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断地更新和维护路由表。转发是处理通过路由器的数据流，关键操作是转发表查询、转发以及相关的队列管理和任务调度等。</p>
<ul>
<li>路由选择:指按照复杂的分布式算法，根据从各相邻路由器所得到的关于整个网络拓扑的变化情况，动态地改变所选择的路由。</li>
<li>分组转发:指路由器根据转发表将用户的IP数据报从合适的端口转发出去。<br>
路由表是根据路由选择算法得出的，而转发表是从路由表得出的。转发表确定在本路由器如何转发分组。转发表的结构应当使查找过程最优化，路由表则需要对网络拓扑变化的计算最优化。</li>
</ul>
<h4 id="网络层提供的两种服务"><a class="markdownIt-Anchor" href="#网络层提供的两种服务"></a> 网络层提供的两种服务</h4>
<p>虚电路服务与数据报服务的对比如下：<br>
<img src="/" class="lazyload" data-src="https://img-blog.csdnimg.cn/2020051717073576.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc5NTExNQ==,size_16,color_FFFFFF,t_70"  alt="在这里插入图片描述"><br>
虚电路：一条从源主机到目的主机的路径</p>
<h3 id="路由算法"><a class="markdownIt-Anchor" href="#路由算法"></a> 路由算法</h3>
<h4 id="静态路由和动态路由"><a class="markdownIt-Anchor" href="#静态路由和动态路由"></a> 静态路由和动态路由</h4>
<p>路由器转发分组是通过路由表转发的，而路由表是通过各种算法得到的。</p>
<p>从能否随网络的通信量或拓扑自适应地进行调整变化来划分，路由算法可分为两大类：</p>
<ol>
<li>静态路由算法(又称为非自适应路由算法)：指由网络管理员手工添加和维护路由表。不适用于大型和复杂的网络环境。</li>
<li>动态路由算法(又称为自适应路由算法)：指路由器上的路由表项是通过相互联接的路由器之间彼此交换信息，然后按照一定的算法优化出来的，而这些路由信息是在一定时间间腺里不断更新，以适应不断变化的网络，以随时获得最优的寻路效果。常用的动态路由算法可分为两类:距离-向量路由算法和链路状态路由算法。</li>
</ol>
<h4 id="距离-向量路由算法"><a class="markdownIt-Anchor" href="#距离-向量路由算法"></a> 距离-向量路由算法</h4>
<p>在距离-向量路由算法中，所有的结点都定期地将它们的整个路由选择表传送给所有与之直接相邻的结点。这种路由选择表包含：</p>
<ul>
<li>每条路径的目的地(另一结点)。</li>
<li>路径的代价(也称距离)。</li>
</ul>
<p>在距离-向量路由算法中，<strong>所有</strong>的结点都必须参与距离向量交换，<strong>以保证路由的有效性和一致性</strong>，也就是说，所有的结点都监听从其他结点传送来的<strong>路由选择更新信息</strong>，并在下列情况下<strong>更新它们的路由选择表</strong>：</p>
<ul>
<li>
<p>被通告一条新的路由，该路由在本结点的路由表中<strong>不存在</strong>，此时本地系统加入这条新的路由。</p>
</li>
<li>
<p>发送来的路由信息中有一条到达某个目的地的路由，该路由比当前使用的路由有较短的距离(较小的代价)。此种情况下，就用经过发送路由信息的结点的新路由替换路由表中达到那个目的地的现有路由。</p>
</li>
</ul>
<p>距离-向量路由算法的实质：迭代计算一条路 由中的站段数或延迟时间，从而得到到达一个目<br>
标的最短(最小代价)通路。</p>
<p>最常见的距离-向量路由算法：RIP算法，它采用“跳数”作为距离的度量。</p>
<h4 id="链路状态路由算法"><a class="markdownIt-Anchor" href="#链路状态路由算法"></a> 链路状态路由算法</h4>
<p>链路状态路由算法：要求<strong>每个</strong>参与该算法的<strong>结点</strong>都有<strong>完全的网络拓扑信息</strong>，它们执行下述两项任务。第一，<strong>主动</strong>测试<strong>所有</strong>邻接结点的状态。第二，<strong>定期</strong>地将链路状态传播给所有其他的结点(或称路由结点)，而不仅仅是其邻接结点。</p>
<p>典型的链路状态算法是OSPF算法。</p>
<p>每当链路状态报文到达时，路由结点便使用这些状态信息去更新自己的网络拓扑和状态“视野图”，一旦链路状态发生了 变化，结点对更新了的网络图利用Dijsktra最短路径算法重新计算路由，从单一的源出发计算到达所有目的结点的最短路径。</p>
<p>链路状态路由算法主要有三点特征：</p>
<ul>
<li>使用泛洪法向本自治系统中所有路由器发送信息，即路由器通过所有端口向所有相邻的路由器发送信息。</li>
<li>发送的信息就是与路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。</li>
<li>只有当链路状态发生变化时，路由器才向所有路由器发送此消息。</li>
</ul>
<p>链路状态路由算法的优点：每个结点独立计算路径，易于查找故障，链路状态报文大小与网络中路由结点数无关，规模可伸展。</p>
<h4 id="层次路由"><a class="markdownIt-Anchor" href="#层次路由"></a> 层次路由</h4>
<p>随着网络规模扩大，路由表变大，查找路由表变慢，传递路由表占用更大带宽，因此路由选择层次方式进行</p>
<p>OSPF 将-自治系统划分出域，路由器只知道本区域路由细节，不知道其他区域的路由细节。</p>
<p>层次路由降低区域内路由信息通信量，但增加了交换信息的种类，适用于规模很大的自治系统。</p>
<h3 id="ipv4"><a class="markdownIt-Anchor" href="#ipv4"></a> IPv4</h3>
<h4 id="ipv4分组"><a class="markdownIt-Anchor" href="#ipv4分组"></a> IPv4分组</h4>
<blockquote>
<p>​	IPv4=IP协议（版本为4）。IPv4,即现在普遍使用的IP协议(版本为4)。IP 协议定义数据传送的基本单元一-IP 分组及其确切的数据格式</p>
</blockquote>
<ul>
<li>
<p>IPv4分组的格式</p>
<p>一个IP分组由首部和数据两部分组成。首部的前一部分是固定长度的， 共20字节，是所有<br>
IP分组必须具有的。在首部固定部分的后面是一些可选字段， 其长度是可变的，用来提供错误检<br>
测及安全等机制。</p>
<p>IP 数据报的格式如下图：<br>
<img src="/" class="lazyload" data-src="https://img-blog.csdnimg.cn/20200517170820694.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc5NTExNQ==,size_16,color_FFFFFF,t_70"  alt="在这里插入图片描述"><br>
IP首部各字段含义：</p>
<ul>
<li>
<p>版本：IP协议的版本，目前广泛使用的版本号为4。</p>
</li>
<li>
<p>首部长度：占 4 位，可表示的最大数值。是 15 个单位(一个单位为 4 字节)，因此 IP 的首部长度的最大值是 60 字节</p>
</li>
<li>
<p>区分服务：占 8 位，用来获得更好的服务。在旧标准中叫做服务类型，但实际上一直未被使用过。1998 年这个字段改名为区分服务。</p>
</li>
<li>
<p>总长度：占 16 位，指首部和数据之和的长度，单位为字节，因此数据报的最大长度为 65535 字节。总长度必须不超过最大传送单元 MTU。</p>
</li>
<li>
<p>标识：占16位。它是一个计数器，用来产生 IP 数据报的标识报。</p>
</li>
<li>
<p>标志：占 3 位，目前只有前两位有意义。标志字段的最低位是 MF (More Fragment)。MF = 1 表示后面“还有分片”。MF =0 表示最后一个分片。标志字段中间的一位是 DF (Don’t Fragment) 。只有当 DF = 0 时才允许分片。</p>
</li>
<li>
<p>片偏移： 占13 位，指出：较长的分组在分片后某片在原分组中的相对位置。片偏移以 8 个字节为偏移单位。</p>
</li>
<li>
<p>生存时间：占8 位，记为 TTL (Time To Live)，指示数据报在网络中可通过的路由器数的最大值。</p>
</li>
<li>
<p>协议：占8 位，指出此数据报携带的数据使用何种协议，以便目的主机的 IP 层将数据部分上交给那个处理过程</p>
</li>
<li>
<p>首部检验和：占16 位，只检验数据报的首部，不检验数据部分。这里不采用 CRC 检验码而采用简单的计算方法。</p>
</li>
<li>
<p>源地址：占4 字节，标识发送方的IP地址。</p>
</li>
<li>
<p>目的地址：占4 字节，标识接收方的IP地址。</p>
</li>
<li>
<p>选项字段：用来支持排错、测量以及安全等措施，内容很丰富。选项字段的长度可变，从 1 个字节到 40 个字节不等，取决于所选择的项目。</p>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li>IP数据报分片</li>
</ol>
<p>一个链路层数据报能承载的最大数据量称为最大传送单元(MTU)。因为IP数据报被封装在链路层数据报中，故链路层的MTU严格地限制着IP数据报的长度，而且在IP数据报的源与目的地路径上的各段链路可能使用不同的链路层协议，有不同的MTU.例如，以太网的MTU为1500字节，而许多广域网的MTU不超过576字节。</p>
<p>当IP数据报的总长度大于链路MTU时，就需要将IP数据报中的数据分装在两个或更多个较小的IP数据报中，这些较小的数据报叫做片。</p>
<p>IP分片：</p>
<ul>
<li>
<p>大IP分组向较小MTU链路转发时，可以被分片</p>
</li>
<li>
<p>1个IP分组分为多片分组</p>
</li>
<li>
<p>IP分片在目的地的网络层被重新组装。目的主机使用IP首部中的标识、标志和片偏移字段来完成对片的重组。</p>
</li>
</ul>
<p>当创建一个 IP数据报时，源主机为该数据报加上一个标识号。 当一 个路由器需要将一个数据报分片时，形成的每个数据报(即片)都具有原始数据报的标识号。当目的主机收到来自同一发送主机的一批数据报时，它可以通过检查数据报的标识号以确定哪些数据报是属于同一个原始数据报的片。IP首部中的标志位有3个比特，但只有后2个比特有意义，分别是MF位和DF位(Don’t Fragment)。只有当DF=0时，该IP 数据报才可以被分片。MF则用来告知目的主机该IP数据报是否为原始数据报的最后一个片。当MF=1时，表示相应的原始数据报还有后续的片:当MF=0时，表示该数据报是相应原始数据报的最后-一个片。 目的主机在对片进行重组时，使用片偏移字段来确定片应放在原始IP数据报的哪个位置。</p>
<pre><code>IP分片涉及一定的计算。
 例题：考虑向一条具有1500字节的MTU的链路发送一个8000字节的数据报(首部20字节，数据部分7980字节)，假定初始化数据报具有序列号321，这将会生成多少个片？它们的特征是什么？
 答：因为IP数据报首部占20字节，因此在每个分片中片的大小是1500-20=1480个字节，故原始数据报中7980字节数据必须被分配到7980/1480=6个片中。3980字节数据必须被分配到3个独立的片中(每个片也是一一个IP数据报)。由于偏移值的单位是8字节，所以除了最后一个片外，其他所有片中的有效数据载荷都是8的倍数。每个片的标识号都为321.前5个片的MF=1（还有分片），最后一个片的MF=0（表示最后一个分片）
</code></pre>
<ol start="3">
<li>
<p>网络层转发分组</p>
<p>网络层的路由器执行的分组转发算法如下:</p>
<ul>
<li>从数据报的首部提取目的主机的IP地址D,得出目的网络地址为N。</li>
<li>若网络地址N直接与路由器相连，则直接将数据报交付目的主机D,这就叫路由器的直接交付;否则是间接交付</li>
<li>若路由表中有到达网络N的路由，则根据路由表转发该数据报</li>
<li>若路由表中有一个默认路由，则发送默认路由器</li>
<li>若以上234都失败，则报告转发分组出错。</li>
</ul>
</li>
</ol>
<h4 id="ipv4地址与nat"><a class="markdownIt-Anchor" href="#ipv4地址与nat"></a> IPv4地址与NAT</h4>
<ol>
<li>
<p>IPv4地址</p>
<p>IP地址：连接在Internet中的每一台主机(或路由器)都分配一个 32比特的全球唯一的标识符。</p>
<p>传统的IP地址是分类的地址，分为A、B、 C、D、E五类。<br>
无论哪类IP地址，都由网络号和主机号两部分组成。即IP地址:= {&lt;网络号&gt;，&lt;主机号&gt;}。其中网络号标志主机(或路由器)所连接到的网络。一个网络号在整个因特网范围内必须是唯一的。主机号标志该主机(或路由器)。一个主机号在它前面的网络号所指明的网络范围内必须是唯- 一的。由此可见，一个IP地址在整个因特网范围内是唯-一的。</p>
</li>
</ol>
<ul>
<li>
<p>五类IP地址的网络号字段和主机号字段：<br>
<img src="/" class="lazyload" data-src="https://img-blog.csdnimg.cn/20200517171202909.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc5NTExNQ==,size_16,color_FFFFFF,t_70"  alt="在这里插入图片描述"><br>
A、B、C类为单播地址；DE类为多播地址。</p>
<p>A类：回送地址；它的IP地址范围为：1.0.0.1~127.255.255.254</p>
<p>B类：IP地址范围为：128.1.0.1~191.255.255.254</p>
<p>C类：IP地址范围为：192.0.1.1~233.255.255.254</p>
</li>
</ul>
<ol start="2">
<li>
<p>特殊的IP地址</p>
<p>在各类IP地址中，有一些IP地址用于表示特殊用途，不用于做主机IP地址：<br>
1).主机号全为0表示本网络本身。例如，203.78.164.0</p>
<p>2).主机号全为1表示本网络的广播地址，又称直接广 播地址。例如,202.98.174.255</p>
<p>3).127.0.0.0 用于环路自检，此地址表示任意主机本身，目的地址为环回地址的IP数据报永远不会出现在任何网络上。</p>
<p>4).32位全为0，即0.0.0.0表示本网络上的本主机。</p>
<p>5).32位全为1，即555.255.255表示整个TCP/IP网络的广播地址，又称受限广播地址。实际使用时由于路由器对广播域的隔离，255255.2555 等效为本网络的广播地址。</p>
</li>
<li>
<p>IP地址特点</p>
<p>1). 网络信息中心在分配IP地址时只分配网络号(第一级)， 而主机号(第二级) .则由得到该网络的单位自行分配，方便了IP地址的管理</p>
<p>2). 路由器仅根据目的主机所连接的<strong>网络号</strong>来转发分组(而不考虑目标主机号)，从而减小了路由表所占的存储空间</p>
<p>3).当一个主机同时连接到两个网络时，该主机就必须同时具有两个相应的IP地址，每个IP地址的网络号必须与所在网络的网络号相同，且这两个IP地址的网络号是不同的。因此IP网络上的一一个路由器必然至少应当具有两个IP地址(路由器每个端口必须至少分配-一个IP地址)</p>
<p>4).用转发器或桥接器(网桥等)连接起来的若干个LAN仍然是同一个网络(同一个广 播域)，因此该LAN中所有主机的IP地址的网络号必须相同，但主机号必须不同。</p>
<p>5).在同一个局域网上的主机或路由器的IP地址中的网络号必须是一样的。</p>
</li>
<li>
<p>网络地址转换（NAT）</p>
<blockquote>
<p>网络地址转换(NAT)：通过将专用网络地址(如企业内部Intranet) 转换为公用地址(如<br>
Intemnet),从而对外隐藏了内部管理的IP地址。它使得整个专用网只需要一个全球IP地址就可以<br>
与因特网连通，由于专用网本地IP地址是可重用的，所以NAT大大节省了IP地址的消耗。同时，<br>
它隐藏了内部网络结构，从而降低了内部网络受到攻击的风险。</p>
</blockquote>
</li>
</ol>
<ul>
<li>​	私有地址不能直接用于Internet，要通过NAT转换为全球IP地址后才能用于Internet。所有路由器对目的地址是私有地址数据报一律不转发</li>
<li>使用NAT时需要在专用网连接到因特网的路由器上安装NAT软件，NAT路由器至少有一个有效的外网地址。当使用本地地址的主机在和外界通信时，NAT 路由器使用NAT转换表将本地地址转换成全球地址，或将全球地址转换成本地地址。NAT转换表中存放着{本地IP地址:端口}到{全球IP地址:端口}的映射。通过{ip地址:端口}这样的映射方式，就可以让多个私有IP地址映射到同一个全球IP地址。</li>
<li>普通路由器在转发IP数据报时，不改变其源IP 地址和目的IP地址。而NAT路由器<br>
在转发IP数据报时要根据地址转换表更换地址。</li>
</ul>
<h4 id="子网划分与子网掩码-cidr"><a class="markdownIt-Anchor" href="#子网划分与子网掩码-cidr"></a> 子网划分与子网掩码、CIDR</h4>
<ol>
<li>
<p>子网划分</p>
<p>子网划分：在IP地址中增加一个“子网号”字段，使IP地址变成3级。</p>
<p>子网划分的基本思路：</p>
<p>1). 划分子网是内网范畴，子网不知子网划分。</p>
<p>2). 从主机号借用若千个比特作为子网号，IP地址变成{&lt;网络号&gt;，&lt;子网号&gt;，&lt;主机号&gt;}。</p>
<p>3).原子网号不能全为0或全为1，现随着CIDR的广泛使用，子网号也可以全为0或全为1了，但要求路由器有软件支持。</p>
<p>4).无论IPv4还是CIDR，主机号全为0或全为1都不能分配。主机号全是0是子网网络号，主机号全是1是子网广播地址。</p>
</li>
<li>
<p>子网掩码</p>
<p>​	为了告诉主机或路由器对一个A类、B类、C类网络进行了子网划分，使用子网掩码来表达对原网络中主机号的借位。</p>
<p>​	<strong>子网掩码</strong>：一个与IP地址相对应的长32bit的二进制串，它由一串 1和跟随的一串 0组成。其中，1对应于IP地址中的网络号及子网号，而0对应于主机号。IP地址与子网掩码相与得到的是子网的网络号。</p>
<p>使用子网掩码特征：<br>
① 主机除了设置IP地址，必须设置子网掩码<br>
② 一个子网下的所有主机和路由器对应端口，有相同子网掩码<br>
③路由器表的记录：目的网络地址：子网掩码：下一跳地址</p>
<p>使用子网掩码时路由器的分组转发算法如下：</p>
<ul>
<li>从分组的首部中提取目的IP地址，用各网络子网掩码与IP相与，若有匹配的相应网络地址，则直接传递到主机。</li>
<li>若路由表中有目的IP特定路由，则转发到下一跳</li>
<li>IP地址和路由表中各子网掩码相与，若有匹配的目的网络地址，则转发到下一跳</li>
<li>若路由表中有一个默认路由，则将分组传送给路由表中所指明的默认路由器；否则，报告转发分组出错。</li>
</ul>
</li>
<li>
<p>无类编址CIDR</p>
<blockquote>
<p>无分类域间路由选择(CIDR)：是在变长子网掩码的基础上提出的-种消除传统A、B、C类<br>
网络划分，在软件的支持下实现超网构造的一种IP 地址的划分方法。</p>
</blockquote>
<p>CIDR的主要特点：</p>
<ul>
<li>使用网络前缀代替子网概念， 两级CIDR为&lt;网络前缀，主机号&gt;。CIDR使用“斜线记法”（CIDR 记法），即IP地址/网络前缀占用比特数。CIDR不使用子网是指没有指明子网字段，但组织内部扔可划分子网</li>
<li>将网络前缀都相同的连续的IP地址组成“CIDR地址块”。一个CIDR地址块可以表示很多地址，这种地址的聚合称为路由聚合（或称为构成超网）。</li>
</ul>
<p>CIDR前缀越短，主机号越长，可分配地址越多，计算时注意去掉全0或全1的地址</p>
<p>最长前缀匹配：路由表项目为&lt;网络前缀，下一跳地址&gt;，查找时若有多个匹配项，则选前缀最长的</p>
<p>CIDR查找路由表的方法:为了进行更加有效的查找最长前缀匹配，通常是将无分类编址的路由表存放在一种层次的数据结构中，然后自上而下地按层次进行查找。这里最常用的数据结构就是二叉线索。</p>
</li>
</ol>
<h4 id="arp协议-dhcp协议与icmp协议"><a class="markdownIt-Anchor" href="#arp协议-dhcp协议与icmp协议"></a> ARP协议、DHCP协议与ICMP协议</h4>
<ol>
<li>
<p>IP地址与硬件地址</p>
<p>① 网络层只能看到抽象的IP数据报分组<br>
② 虽然IP首部有完整的源IP和目的IP，但路由选择时只需要目的IP<br>
③数据链路层只能看到帧</p>
</li>
<li>
<p>地址解析协议（ARP）</p>
<p>ARP地址解析协议<strong>完成IP地址转换到MAC地址</strong>。</p>
<p>每个主机都设有一个 ARP高速缓存,存放本局域网上各主机和路由器的IP地址到MAC地址的映射表，称ARP表。使用ARP协议来动态维护此ARP表。</p>
</li>
</ol>
<ul>
<li>工作原理：主机A向主机B发送IP数据报，先在其ARP高速缓存中查看有无主机B的IP地址。如有，就可查出其对应的硬件地址写入MAC帧。如果没有，就通过使用目的MAC地址为全F的帧来封装并广播ARP请求分组，可以使同一个局域网里的所有主机收到ARP请求。当主机B收到该ARP请求后，就会向主机A发出响应ARP分组，分组中包含主机B的IP与MAC地址的映射关系，主机A在收到后将此映射写入ARP缓存中，然后按查询到的硬件地址发送MAC帧。ARP协议由于“看到了”IP地址，所以它工作在网络层，而NAT路由器由于“看到了”端口，所以它工作在传输层。</li>
</ul>
<ol start="3">
<li>
<p>动态主机配置协议（DHCP）</p>
<p>DHCP：应用层协议，<strong>基于UDP</strong>，用来<strong>动态分配IP分组</strong></p>
<p>申请主机广播请求报文，DHCP服务器响应报文并分配IP，该IP是临时IP，有租用时间。</p>
</li>
<li>
<p>网际控制报文协议ICMP</p>
<p>ICMP：是网络层协议，使主机和路由器可以报告差错和异常情况。</p>
<p>ICMP也是IP分组，其报文作为IP分组的数据字段。</p>
<p>ICMP报文的种类有两种，即ICMP差错报告和ICMP询问报告。</p>
<p>ICMP差错报告报文用于目标主机或到目标主机路径上的路由器向源主机报告差错和异常情况。共有以下五种类型：</p>
<ul>
<li>终点不可达。</li>
<li>源点抑制（减缓发送速率）</li>
<li>时间超过（TTL到0）</li>
<li>参数问题（首部参数）</li>
<li>改变路由(重定向)</li>
</ul>
<p>不应发送 ICMP 差错报告报文的几种情况 ：</p>
<ul>
<li>
<p>IMCP报文差错</p>
</li>
<li>
<p>数据报的后续分片</p>
</li>
<li>
<p>具有多播地址的数据报</p>
</li>
<li>
<p>127.0.0.1或0.0.0.0这样的特殊地址的报文</p>
</li>
</ul>
<p>ICMP常见的应用：</p>
<ul>
<li>
<p>ping：应用层协议，直接使用ICMP协议而不使用TCP和UDP协议，用到ICMP的回送请求和回答报文</p>
</li>
<li>
<p>tracert（traceroute）：工作在网络层，使用ICMP的超时报文</p>
</li>
</ul>
</li>
</ol>
<h3 id="ipv6"><a class="markdownIt-Anchor" href="#ipv6"></a> IPv6</h3>
<h4 id="ipv6的主要特点"><a class="markdownIt-Anchor" href="#ipv6的主要特点"></a> IPv6的主要特点</h4>
<ol>
<li>
<p>解决IP消耗的方法：</p>
<ul>
<li>
<p>采用无类编址（CIDR），使IP地址的分配更加合理</p>
</li>
<li>
<p>采用网络地址转换NAT方法以节省全球IP地址</p>
</li>
<li>
<p>采用具有更大地址空间的新版本的IP协议IPv6</p>
<p>而IPv6是最根本的方法</p>
</li>
</ul>
</li>
<li>
<p>IPv6的主要特点：</p>
<ul>
<li>更大的地址空间。从32位增加到128位</li>
<li>扩展的地址层次结构</li>
<li>灵活的首部格式</li>
<li>改进选项</li>
<li>允许协议继续扩充</li>
<li>支持自动配置</li>
<li>支持资源的预分配</li>
</ul>
</li>
</ol>
<h4 id="ipv6地址"><a class="markdownIt-Anchor" href="#ipv6地址"></a> IPv6地址</h4>
<p>IPv6数据报的目的地址可以是以下三种基本类型地址之一：</p>
<ul>
<li>单播：点对点通信</li>
<li>多播：一点对多点的通信，分组被交付到一组计算机的每一个</li>
<li>任播:这是IPv6增加的一种类型。目标计算是一组，但只交付给一个，通常是距离最近的一个</li>
</ul>
<h3 id="路由协议"><a class="markdownIt-Anchor" href="#路由协议"></a> 路由协议</h3>
<h4 id="自治系统as"><a class="markdownIt-Anchor" href="#自治系统as"></a> 自治系统AS</h4>
<p>自治系统(Autononous System, AS)：在单一的技术管理下的一组路由器，而这些路由器使用一种AS内部的路由选择协议和共同的度量以确定分组在该AS内的路由，同时还使用一种 AS内的路由选择协议用以确定分组在AS之间的路由。</p>
<h4 id="域内路由与域间路由"><a class="markdownIt-Anchor" href="#域内路由与域间路由"></a> 域内路由与域间路由</h4>
<p>自治系统内部的路由选择称域内路由选择，自治系统之间的路由选择称域间路由选择。</p>
<p>因特网有两大类路由选择协议：</p>
<ol>
<li>
<p>内部网关协议(Interior Gateway Protocol, IGP)：自治系统内部使用的路由选择协议，如RIP协议和OSPF协议。</p>
</li>
<li>
<p>外部网关协议(External Gateway Protocol, EGP)：自治系统间的协议，如BGP-4。</p>
</li>
</ol>
<h4 id="rip路由协议"><a class="markdownIt-Anchor" href="#rip路由协议"></a> RIP路由协议</h4>
<ol>
<li>
<p>路由信息协议(Rouing Inomation Pocol, RIP) ：一种分布式的基于<strong>距离向量</strong>的路由选择协议。是应用层协议，使用UDP传输数据。</p>
</li>
<li>
<p>RIP协议规定：</p>
<ul>
<li>
<p>要根据距离-向量路由算法维护路由表，规定每30秒广播一个路由更新信息。</p>
</li>
<li>
<p>距离也称为跳数(Hop Count),每经过一个路由器，则距离(跳数)加1。跳数为0表示直接连接。RIP认为跳数最少的路由最好</p>
</li>
<li>
<p>跳数最大值为16，即路由最多只能经过15个路由器，超过16个表示不可达。适用于小型网络</p>
</li>
<li>
<p>RIP中每个网络子网掩码必须相同。RIP2中支持CIDR</p>
</li>
</ul>
</li>
<li>
<p>RIP协议的特点</p>
<ul>
<li>
<p>仅和<strong>相邻节点</strong>交换路由表，时间间隔为30秒。</p>
</li>
<li>
<p>路由器交换的信息是当前本路由器所知道的全部信息，即自己的路由表。</p>
</li>
<li>
<p>按固定的时间间隔交换路由信息，如每隔30秒。</p>
</li>
<li>
<p>一开始每路由器只知道相邻节点路由，一次RIP广播后就能知道跳数为1的路由，N次广播后所有的路由器最终知道整个网络的路由表，称RIP最终是收敛的</p>
</li>
</ul>
</li>
<li>
<p>距离向量算法（过程）</p>
<ul>
<li>
<p>A收到B发来的RIP报文&lt;C,3&gt;,A将该报文修改为&lt;B,4&gt;</p>
</li>
<li>
<p>若A的路由表中没有C，则将C加入到路由表中。若A的路由表中有C且下一跳是B的话，则更新</p>
</li>
<li>
<p>若A的路由表有C但下一跳不是B的话，看哪个跳数小选哪个</p>
</li>
<li>
<p>若路由表中某个项目180秒没更新过，则将该路由项目距离改为16（不可达）</p>
</li>
</ul>
</li>
<li>
<p>RIP的优缺点</p>
<p>优点：实现简单，开销小，收敛过程较快。</p>
<p>缺点：一网络出现故障时，收敛变慢，俗称坏消息传的慢；二更新要传递整个路由表，占用带宽大</p>
</li>
</ol>
<h4 id="ospf路由协议"><a class="markdownIt-Anchor" href="#ospf路由协议"></a> OSPF路由协议</h4>
<ol>
<li>
<p>OSPF协议的基本特点</p>
<p>开放最短路径优先（OSPF）协议，使用链路状态路由算法，是网络层协议。</p>
</li>
<li>
<p>OSPF与RIP协议的区别：</p>
<ul>
<li>OSPF使用<strong>洪泛法</strong>向本自治系统中<strong>所有路由器</strong>发送信息。而RIP协议是<strong>仅仅</strong>向自己相邻的<strong>几个路由器</strong>发送信息。</li>
<li>发送的信息就是与<strong>本路由器相邻</strong>的所有路由器的链路状态。而在RIP协议中，发送的信息是本路由器所知道的<strong>全部信息</strong>，即整个路由表。</li>
<li>只有当链路状态发生变化时，路由器才用洪泛法向<strong>所有路由器</strong>发送此信息，并且更新过程收敛得快。而在RIP协议中，不管网络拓扑是否发生变化，路由器之间都会<strong>定期</strong>交换路由表的信息。</li>
<li>OSPF是<strong>网络层协议</strong>，它不使用UDP或TCP而是直接IP数据报传送)。而RIP是应用层协议，它在传输层使用UDP协议。</li>
</ul>
</li>
<li>
<p>OSPF其他特点：</p>
<ul>
<li>OSPF可根据IP分组的不同服务类型设置不同的代价，计算不同的路由，因此十分灵活。</li>
<li>相同代价的路径间，可以负载平衡。</li>
<li>交换的分组可鉴别，可用来鉴别路由器，保证了仅在信赖的路由器之间交换链路状态信息。</li>
<li>支持可变长度的子网划分和无分类编址CIDR。</li>
<li>每一个链路状态都带上一个32位的序号，序号越大状态就越新。</li>
</ul>
</li>
<li>
<p>OSPF工作原理：</p>
<p>路由器间频繁交换链路状态信息，最终构成全网络拓扑结构图。每个路由器根据该图Dijkstra计算最短路径用来构造自己的路由表。当链路状态发生变化时，根据算法更新计算路由表。路由表不会存储完整路劲，只会存储下一跳。</p>
<p>OSPF可将一个自治系统再划分成更小的域，路由器只知道本域内的网络拓扑，减少整个网上的通信量。</p>
</li>
<li>
<p>OSPF的五种分组类型</p>
</li>
</ol>
<ul>
<li>问候分组：用来发现和维持邻站的可达性。</li>
<li>数据库描述分组：向邻接点发出自己数据库中的所有链路状态项目的摘要信息。</li>
<li>链路状态请求分组：请求发送特定链路状态项目的详细信息。</li>
<li>链路状态更新分组：用洪泛法对全网更新链路状态，是OSPF核心部分。</li>
<li>链路状态确认分组：对链路更新分组的确认。</li>
</ul>
<ol start="6">
<li>
<p>OSPF工作过程：</p>
<ul>
<li>通常每隔10秒交换一次问候分组，确保节点可达。</li>
<li>刚开始工作时，使用数据库描述分组和相邻路由器交换本数据库中链路状态摘要信息。然后，路由器就使用链路状态请求分组请求发送自己没有的链路。最终同步全网数据库。</li>
<li>运行时，只要一个路由器的链路状态发生变化，就用洪泛法发送链路状态更新分组。其他路由器在更新后，发送链路状态确认分组对更新分组进行确认。</li>
</ul>
</li>
</ol>
<h4 id="bgp路由协议"><a class="markdownIt-Anchor" href="#bgp路由协议"></a> BGP路由协议</h4>
<ol>
<li>
<h4 id="边界网关协议bgp"><a class="markdownIt-Anchor" href="#边界网关协议bgp"></a> 边界网关协议（BGP）</h4>
<p>边界网关协议（BGP）：是不同自治系统的路由器之间交换路由信息的协议。是应用层协议，基于TCP协议，使用路径-向量路由算法（不是距离-向量算法）</p>
</li>
<li>
<p>BGP协议的工作原理：</p>
<p>每一个自治系统至少一个路由器(可以有多个)作为该自治系统的“BGP发言人”。各发言人之间交换路由信息。交换时要先建立TCP连接，然后交换BGP报文以建立BGP会话，再利用BGP会话交换路由信息。最后各发言人就能找到到达各自治系统的较好路由。</p>
</li>
<li>
<p>BGP协议的特点</p>
<ul>
<li>
<p>BGP交换的节点数是网络中的AS数，明显比AS内节点数小很多</p>
</li>
<li>
<p>每个AS的发言人是很少的，这样自治系统间的路由不会很复杂</p>
</li>
<li>
<p>BGP支持CIDR，因此BGP的路由表也就应当包括目的网络前缀、下一.跳路由器， 以及<br>
到达该目的网络所要经过的各个自治系统序列。</p>
</li>
<li>
<p>在BGP刚运行时，BGP的邻站是交换整个的BGP路由表。但以后只需要在发生变化时<br>
更新有变化的部分。这样做对节省网络带宽。</p>
</li>
</ul>
</li>
<li>
<p>BGP-4共使用4种报文</p>
<ul>
<li>打开报文，用来与相邻的另一个BGP发言人建立关系。</li>
<li>更新报文，用来发送某一路由的信息，以及列出要撤销的多条路由。</li>
<li>保活报文，用来确认打开报文和周期性地证实邻站关系。</li>
<li>通知报文，用来发送检测到的差错。</li>
</ul>
</li>
</ol>
<h3 id="习题"><a class="markdownIt-Anchor" href="#习题"></a> 习题</h3>
<ol>
<li>
<p>某自治系统内采用RIP协议，若该自治系统内的路由器R1收到其邻居路由器R2的距离矢量，距离矢量中包含信息&lt;net1，16&gt;， 则能得出的结论是( )。<br>
A. R2 可以经过R1到达netl,跳数为17<br>
B. R2可以到达netl, 跳数为16.<br>
C. RI可以经过R2到达netl, 跳数为17<br>
D. R1不能经过R2到达netl</p>
<p>【答案】D</p>
<p>【解析】RI在收到信息并更新路由表后，若需要经过R2到达netl,则其跳数为17,由于距离为16表示不可达，因此R1不能经过R2到达net1, R2也不可能到达netl.B、C错误，D正确。而题目中并未给出R1向R2发送的信息，因此A也不正确。</p>
</li>
<li>
<p>直接封装RIP、OSPF、 BGP报文的协议分别是( )。<br>
A. TCP、UDP、IP<br>
B. TCP、 IP、 UDP<br>
C. UDP. TCP、IP<br>
D. UDP、IP、TCP</p>
<p>【答案】D</p>
<p>【解析】RIP是一种分布式的基于距离向量的路由选择协议，通过广播UDP报文来交换路由信息。OSPF是一个内部网关协议，要交换的信息量较大，应使报文的长度尽量短，所以不使用传输层协议(如UDP或TCP)，而是直接采用IP。BGP是一个外部网关协议，在不同的自治系统之间交换路由信息，由于网络环境复杂，需要保证可靠传输，所以采用TCP。因此，选D。</p>
</li>
<li>
<p>以下关于RIP的描述中，错误的是( )。<br>
A. RIP是基于距离一向量路由选择算法的<br>
B. RIP 要求内部路由器将它关于整个AS的路由信息发布出去<br>
C. RIP 要求内部路由器向整个AS的路由器发布路由信息<br>
D. RIP要求内部路由器按照一定的时间间隔发布路由信息</p>
<p>【答案】C</p>
<p>【解析】RIP规定一个路由器只向相邻路由器发布路由信息，而不是像OSPF那样向整个域洪泛。</p>
</li>
<li>
<p>某网络的IP地址空间为192.168.5.0/24, 采用定长子网划分，子网掩码为255.255. 255.248,则该网络中的最大子网个数、每个子网内的最大可分配地址个数分别是( )。<br>
A.32, 8<br>
B.32， 6<br>
C.8, 32<br>
D.8, 30</p>
<p>【答案】B</p>
<p>【解析】由于该网络的IP地址为192.168.5.0/24,网络号为前24位，后8位为子网号+主机号。子网掩码255.255.255.248,第4个字节248转换成二进制为111000因此后8位中，前5位用于子网号，在CIDR中可以表示2*=32个子网:后3位用于主机号，除去全0和全1的情况，可以表示23-2=6个主机地址。</p>
</li>
<li>
<p>设有下面4条路由: 172.18.129.0/24. 172.18.130.0/24.172.18.132.0/24和172.18.133.0/ 24,如果进行路由聚合，能覆盖这4条路由的地址是( )。<br>
A. 172.18.128.0/21<br>
B.172. 18.128.0/22<br>
C.172.18. 130.0/22<br>
D.172.18.132.0/23</p>
<p>【答案】A</p>
<p>【解析】4条路由的前24位(3个字节)为网络前缀，前2个字节都- -样，故只需要比较第3个字节即可，129-0000001 130-0000010， 132-10000100， 13310000101。 前5位是完全相同的，因此聚合后的网络的掩码中1的数量应该是8+8+5-21， 聚合后的网络的第3个字节应该是.1000000=128，因此答案为172.18.128.0/21 。</p>
</li>
<li>
<p>若路由器R因为拥塞丢弃IP分组,则此时R可向发出该IP分组的源主机发送的ICMP报文的类型是()。<br>
A.路由重定向<br>
B.目的不可达<br>
C.源抑制<br>
D.超时</p>
<p>【答案】 C<br>
【解析】当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢。</p>
</li>
<li>
<p>下列IP地址中,只能作为IP分组的源IP地址但不能作为目的IP地址的是()。<br>
A.0.0.0.0<br>
B.127.0.0.1<br>
C.200.10.10.3<br>
D.255.255.255.255</p>
<p>【答案】 A<br>
【解析】根据RFC文档描述，0.0.0.0/32可以作为本主机在本网络上的源地址。127.0.0.1是回送地址，以它为目的IP地址的数据将被立即返回到本机。200.10.10.3 是C类IP地址。255.255.255.255 是广播地址。</p>
</li>
<li>
<p>ARP协议的功能是( ).<br>
A.根据IP地址查询MAC地址<br>
B.根据MAC地址查询IP地址<br>
C.根据域名查询IP地址<br>
D.根据IP地址查询城名</p>
<p>【答案】A<br>
【解析】在实际网络的数据链路层上传送数据时，最终必须使用硬件地址, ARP协议是将网络层的IP地址解析为数据链路层的MAC地址。</p>
</li>
<li>
<p>若将101.200 16. 0/20划分为5个子网，则可能的最小子网的可分配IP地址数是(）<br>
A.126<br>
B.254<br>
C. 510<br>
D.1 022</p>
<p>【答案】B</p>
</li>
<li>
<p>网络互连时,在由路由器进行互连的多个局域网的结构中，要求每个局域网的( )。<br>
A物理层协议可以不同，而数据链路层及数据链路层以上的高层协议必须相同<br>
B.物理层、数据链路层协议可以不同，而数据链路层以上的高层协议必须相同<br>
C.物理层、数据链路层、网络层协议可以不同，而网络层以上的高层协议必须相同<br>
D.物理层数据链路层、网络层及高层协议都可以不同</p>
<p>【答案】C</p>
</li>
<li>
<p>一个 IPv6的简化写法为8::D0:123 :CDEF :89A，那么它的完整地址应该是( )。<br>
A.8000: 0000 :0000 :00D0:1230 :CDEF :89A0<br>
B.0008: 0000: 0000: 0000:0123:CDEF:89A0</p>
<p>C.8000:0000:0000:0000:D000:0123:CDEF:89A0</p>
<p>D.0008:0000:0000:0000:00D0:0123:CDEF:089A</p>
</li>
</ol>
<p>【答案】A<br>
【解析】在实际网络的数据链路层上传送数据时，最终必须使用硬件地址, ARP协议是将网络层的IP地址解析为数据链路层的MAC地址。</p>
<ol start="12">
<li>若将101.200 16. 0/20划分为5个子网，则可能的最小子网的可分配IP地址数是(）<br>
A.126<br>
B.254<br>
C. 510<br>
D.1 022</li>
</ol>
<p>【答案】B</p>
<ol start="13">
<li>
<p>网络互连时,在由路由器进行互连的多个局域网的结构中，要求每个局域网的( )。<br>
A物理层协议可以不同，而数据链路层及数据链路层以上的高层协议必须相同<br>
B.物理层、数据链路层协议可以不同，而数据链路层以上的高层协议必须相同<br>
C.物理层、数据链路层、网络层协议可以不同，而网络层以上的高层协议必须相同<br>
D.物理层数据链路层、网络层及高层协议都可以不同</p>
<p>【答案】C</p>
</li>
<li>
<p>一个 IPv6的简化写法为8::D0:123 :CDEF :89A，那么它的完整地址应该是( )。<br>
A.8000: 0000 :0000 :00D0:1230 :CDEF :89A0<br>
B.0008: 0000: 0000: 0000:0123:CDEF:89A0</p>
<p>C.8000:0000:0000:0000:D000:0123:CDEF:89A0</p>
<p>D.0008:0000:0000:0000:00D0:0123:CDEF:089A</p>
<p>【答案】D</p>
</li>
<li>
<p>考虑向一条具有1500字节的MTU的链路发送一个8000字节的数据报(首部20字节，数据部分7980字节)，假定初始化数据报具有序列号321，这将会生成多少个片？它们的特征是什么？</p>
</li>
</ol>
<p>答：因为IP数据报首部占20字节，因此在每个分片中片的大小是1500-20=1480个字节，故原始数据报中7980字节数据必须被分配到7980/1480=6个片中。3980字节数据必须被分配到3个独立的片中(每个片也是一一个IP数据报)。由于偏移值的单位是8字节，所以除了最后一个片外，其他所有片中的有效数据载荷都是8的倍数。每个片的标识号都为321.前5个片的MF=1（还有分片），最后一个片的MF=0（表示最后一个分片）</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">舍予</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zshuhan.github.io/2020/05/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/">https://zshuhan.github.io/2020/05/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zshuhan.github.io" target="_blank">(✿◡‿◡)胖涵</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="/img/page/6.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/reward/wechat.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/reward/alipay.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/14/MyBatis/"><img class="prev_cover lazyload" data-src="/img/page/7.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">和我一起学MyBatis</div></div></a></div><div class="next-post pull_right"><a href="/2020/05/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/"><img class="next_cover lazyload" data-src="/img/page/3.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机网络学习笔记（三）之传输层</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/04/17/计算机网络学习笔记（一）之计算机网络体系结构/" title="计算机网络学习笔记（一）之计算机网络体系结构"><img class="relatedPosts_cover lazyload"data-src="/img/page/1.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-17</div><div class="relatedPosts_title">计算机网络学习笔记（一）之计算机网络体系结构</div></div></a></div><div class="relatedPosts_item"><a href="/2020/05/11/计算机网络学习笔记（三）之传输层/" title="计算机网络学习笔记（三）之传输层"><img class="relatedPosts_cover lazyload"data-src="/img/page/3.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-11</div><div class="relatedPosts_title">计算机网络学习笔记（三）之传输层</div></div></a></div><div class="relatedPosts_item"><a href="/2020/04/17/计算机网络学习笔记（二）之应用层/" title="计算机网络学习笔记（二）之应用层"><img class="relatedPosts_cover lazyload"data-src="/img/page/2.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-04-17</div><div class="relatedPosts_title">计算机网络学习笔记（二）之应用层</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  appId: 'tGTJWhy2o72UzS7I35bSyayE-gzGzoHsz',
  appKey: '7rwGckEGxly6bxmWjskpf0f9',
  placeholder: '快来一起玩呀!',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'zh-cn',
  recordIP: false,
  serverURLs: '',
  mathjax: false
});</script></div></article></main><footer id="footer" style="background-image: url(/img/page/5.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By 舍予</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://zshuhan.github.io/">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script><script src="/js/search/local-search.js"></script></body></html>